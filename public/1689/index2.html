<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NTD Tools Hub — Tổng hợp công cụ</title>
    <meta name="description" content="Tổng hợp tất cả công cụ và ứng dụng web từ NTD — AI, Âm nhạc, Chat, Học tập và nhiều hơn nữa.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        /* ===== RESET & BASE ===== */
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --bg-primary: #05060f;
            --bg-card: rgba(15, 16, 30, 0.65);
            --bg-card-hover: rgba(25, 26, 50, 0.85);
            --glass-border: rgba(255, 255, 255, 0.07);
            --glass-border-hover: rgba(255, 255, 255, 0.15);
            --text-primary: #f0f1f7;
            --text-secondary: #8b8fa3;
            --text-muted: #565a6e;
            --accent-1: #6366f1;
            --accent-2: #8b5cf6;
            --accent-3: #ec4899;
            --accent-4: #06b6d4;
            --accent-5: #10b981;
            --accent-6: #f59e0b;
            --glow-1: rgba(99, 102, 241, 0.4);
            --radius-lg: 20px;
            --radius-md: 14px;
            --modal-bg: linear-gradient(135deg, rgba(15,16,35,0.97), rgba(10,11,25,0.99));
        }

        /* ===== LIGHT MODE ===== */
        body.light-mode {
            --bg-primary: #f5f6fa;
            --bg-card: rgba(255, 255, 255, 0.75);
            --bg-card-hover: rgba(255, 255, 255, 0.95);
            --glass-border: rgba(0, 0, 0, 0.08);
            --glass-border-hover: rgba(0, 0, 0, 0.15);
            --text-primary: #1a1b2e;
            --text-secondary: #5a5d72;
            --text-muted: #8b8fa3;
            --glow-1: rgba(99, 102, 241, 0.25);
            --modal-bg: linear-gradient(135deg, rgba(255,255,255,0.97), rgba(245,246,250,0.99));
        }

        body.light-mode .card-icon-wrapper,
        body.light-mode .modal-icon {
            color: var(--text-primary) !important; /* Force dark icon color */
        }

        body.light-mode::before {
            background:
                radial-gradient(ellipse 80% 50% at 20% -10%, rgba(99, 102, 241, 0.08), transparent),
                radial-gradient(ellipse 60% 40% at 80% 10%, rgba(139, 92, 246, 0.06), transparent),
                radial-gradient(ellipse 50% 30% at 10% 70%, rgba(236, 72, 153, 0.04), transparent),
                radial-gradient(ellipse 40% 40% at 90% 80%, rgba(6, 182, 212, 0.04), transparent);
        }

        html { scroll-behavior: smooth; }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
            min-height: 100vh;
            line-height: 1.6;
            transition: background 0.4s, color 0.4s;
        }

        body::before {
            content: '';
            position: fixed;
            inset: 0;
            background:
                radial-gradient(ellipse 80% 50% at 20% -10%, rgba(99, 102, 241, 0.18), transparent),
                radial-gradient(ellipse 60% 40% at 80% 10%, rgba(139, 92, 246, 0.14), transparent),
                radial-gradient(ellipse 50% 30% at 10% 70%, rgba(236, 72, 153, 0.1), transparent),
                radial-gradient(ellipse 40% 40% at 90% 80%, rgba(6, 182, 212, 0.08), transparent);
            pointer-events: none;
            z-index: 0;
            transition: background 0.4s;
        }

        #particles { position: fixed; inset: 0; z-index: 0; pointer-events: none; }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-primary); }
        ::-webkit-scrollbar-thumb { background: linear-gradient(180deg, var(--accent-1), var(--accent-2)); border-radius: 99px; }
        ::selection { background: var(--accent-1); color: white; }

        /* ===== NAV ===== */
        .top-nav {
            position: fixed; top: 0; left: 0; right: 0; z-index: 100;
            padding: 16px 32px;
            display: flex; justify-content: space-between; align-items: center; gap: 12px;
            backdrop-filter: blur(24px); -webkit-backdrop-filter: blur(24px);
            background: rgba(5, 6, 15, 0.6);
            border-bottom: 1px solid var(--glass-border);
            transition: background 0.3s;
        }
        body.light-mode .top-nav { background: rgba(245, 246, 250, 0.7); }

        .nav-logo {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5rem; font-weight: 700;
            background: linear-gradient(135deg, var(--accent-1), var(--accent-3));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
            cursor: pointer; transition: filter 0.3s;
        }
        .nav-logo:hover { filter: drop-shadow(0 0 20px var(--glow-1)); }

        .nav-links {
            display: flex; gap: 8px;
            background: rgba(255,255,255,0.03);
            padding: 4px; border-radius: 12px;
            border: 1px solid var(--glass-border);
        }

        .nav-links a {
            color: var(--text-secondary); text-decoration: none;
            font-size: 0.82rem; font-weight: 500;
            padding: 8px 16px; border-radius: 8px;
            transition: all 0.3s; letter-spacing: 0.02em;
            display: flex; align-items: center; gap: 6px;
        }
        .nav-links a:hover, .nav-links a.active {
            color: var(--text-primary); background: rgba(99, 102, 241, 0.15);
        }

        .nav-right {
            display: flex; align-items: center; gap: 14px;
        }

        .nav-stats {
            display: flex; align-items: center; gap: 8px;
            font-size: 0.82rem; color: var(--text-muted);
        }
        .nav-stats .count {
            font-weight: 700; color: var(--accent-4);
            font-family: 'Space Grotesk', sans-serif;
        }

        .theme-toggle {
            width: 40px; height: 40px; border-radius: 12px;
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--glass-border);
            color: var(--text-secondary); font-size: 1.05rem;
            cursor: pointer; display: flex; align-items: center; justify-content: center;
            transition: all 0.3s; position: relative; overflow: hidden;
        }
        .theme-toggle:hover {
            background: rgba(99,102,241,0.12); color: var(--text-primary);
            border-color: rgba(99,102,241,0.3);
        }
        .theme-toggle .fa-moon { display: inline; }
        .theme-toggle .fa-sun  { display: none; }
        body.light-mode .theme-toggle .fa-moon { display: none; }
        body.light-mode .theme-toggle .fa-sun  { display: inline; color: #f59e0b; }
        body.light-mode .theme-toggle { background: rgba(0,0,0,0.04); border-color: rgba(0,0,0,0.1); }

        /* ===== HERO ===== */
        .hero {
            position: relative; z-index: 1;
            padding: 140px 32px 60px;
            text-align: center; max-width: 900px; margin: 0 auto;
        }

        .hero-badge {
            display: inline-flex; align-items: center; gap: 8px;
            padding: 6px 18px;
            background: rgba(99, 102, 241, 0.1);
            border: 1px solid rgba(99, 102, 241, 0.25);
            border-radius: 50px;
            font-size: 0.75rem; font-weight: 600; color: var(--accent-1);
            text-transform: uppercase; letter-spacing: 0.1em;
            margin-bottom: 24px; animation: fadeInDown 0.8s ease;
        }
        .hero-badge .dot {
            width: 6px; height: 6px; background: var(--accent-1);
            border-radius: 50%; animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.3); }
        }

        .hero h1 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: clamp(2.5rem, 7vw, 4.5rem);
            font-weight: 700; line-height: 1.1; letter-spacing: -0.03em;
            margin-bottom: 20px; animation: fadeInUp 0.8s ease 0.1s both;
        }
        .hero h1 .gradient-text {
            background: linear-gradient(135deg, var(--accent-1) 0%, var(--accent-2) 30%, var(--accent-3) 60%, var(--accent-4) 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
        }

        .hero p {
            font-size: 1.1rem; color: var(--text-secondary);
            max-width: 600px; margin: 0 auto 32px;
            animation: fadeInUp 0.8s ease 0.2s both;
        }

        .search-wrapper {
            max-width: 560px; margin: 0 auto;
            position: relative; animation: fadeInUp 0.8s ease 0.3s both;
        }

        .search-input {
            width: 100%; padding: 16px 20px 16px 52px;
            background: var(--bg-card); border: 1px solid var(--glass-border);
            border-radius: 16px; color: var(--text-primary);
            font-family: inherit; font-size: 1rem;
            backdrop-filter: blur(10px); transition: all 0.4s; outline: none;
        }
        .search-input::placeholder { color: var(--text-muted); }
        .search-input:focus {
            border-color: var(--accent-1);
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.12), 0 8px 32px rgba(0,0,0,0.3);
            background: rgba(20, 21, 40, 0.9);
        }

        .search-icon {
            position: absolute; left: 18px; top: 50%; transform: translateY(-50%);
            font-size: 1rem; opacity: 0.4; pointer-events: none; color: var(--text-muted);
        }

        /* ===== FILTER TABS ===== */
        .filter-section {
            position: relative; z-index: 1;
            max-width: 1400px; margin: 0 auto; padding: 0 32px 40px;
        }

        .filter-tabs {
            display: flex; flex-wrap: wrap; gap: 8px;
            justify-content: center; animation: fadeInUp 0.8s ease 0.4s both;
        }

        .filter-tab {
            padding: 10px 22px;
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--glass-border);
            border-radius: 50px; color: var(--text-secondary);
            font-size: 0.85rem; font-weight: 500;
            cursor: pointer; transition: all 0.3s;
            display: flex; align-items: center; gap: 8px;
        }
        .filter-tab:hover {
            background: rgba(99, 102, 241, 0.08);
            border-color: rgba(99, 102, 241, 0.3);
            color: var(--text-primary);
        }
        .filter-tab.active {
            background: linear-gradient(135deg, var(--accent-1), var(--accent-2));
            border-color: transparent; color: white;
            box-shadow: 0 4px 20px rgba(99, 102, 241, 0.35);
        }
        .filter-tab .tab-count {
            font-size: 0.72rem; background: rgba(255,255,255,0.15);
            padding: 2px 8px; border-radius: 20px; font-weight: 700;
        }
        .filter-tab.active .tab-count { background: rgba(255,255,255,0.25); }

        /* ===== CATEGORIES ===== */
        .categories-container {
            position: relative; z-index: 1;
            max-width: 1400px; margin: 0 auto; padding: 0 32px 80px;
        }

        .category-section { margin-bottom: 56px; }

        .category-header {
            display: flex; align-items: center; gap: 14px;
            margin-bottom: 24px; padding-bottom: 14px;
            border-bottom: 1px solid var(--glass-border);
        }

        .category-icon {
            width: 44px; height: 44px; border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.1rem; flex-shrink: 0;
        }

        .category-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.4rem; font-weight: 700; letter-spacing: -0.02em;
        }

        .category-count {
            font-size: 0.78rem; color: var(--text-muted);
            background: rgba(255,255,255,0.04); padding: 4px 12px;
            border-radius: 20px; border: 1px solid var(--glass-border);
        }

        /* ===== TOOL CARDS ===== */
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .tool-card {
            position: relative; background: var(--bg-card);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg); padding: 28px 26px;
            backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer; overflow: hidden;
            text-decoration: none; display: block; color: inherit;
        }
        .tool-card::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0;
            height: 3px; background: var(--card-accent, linear-gradient(90deg, var(--accent-1), var(--accent-2)));
            opacity: 0; transition: opacity 0.4s;
        }
        .tool-card::after {
            content: ''; position: absolute; inset: 0;
            border-radius: var(--radius-lg);
            background: radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(255,255,255,0.04), transparent 60%);
            pointer-events: none; opacity: 0; transition: opacity 0.4s;
        }
        .tool-card:hover {
            transform: translateY(-6px);
            border-color: var(--glass-border-hover);
            background: var(--bg-card-hover);
            box-shadow: 0 20px 50px rgba(0,0,0,0.4), 0 0 40px var(--card-glow, rgba(99,102,241,0.08));
        }
        .tool-card:hover::before, .tool-card:hover::after { opacity: 1; }

        .card-header {
            display: flex; align-items: flex-start; justify-content: space-between;
            margin-bottom: 16px;
        }

        .card-icon-wrapper {
            width: 52px; height: 52px; border-radius: 14px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.3rem; position: relative; color: white;
        }

        .card-arrow {
            width: 36px; height: 36px; border-radius: 10px;
            background: rgba(255,255,255,0.04);
            border: 1px solid var(--glass-border);
            display: flex; align-items: center; justify-content: center;
            font-size: 0.8rem; color: var(--text-muted); transition: all 0.3s;
        }
        .tool-card:hover .card-arrow {
            background: var(--accent-1); color: white;
            border-color: var(--accent-1); transform: translate(4px, -4px);
        }

        .card-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.15rem; font-weight: 700;
            margin-bottom: 8px; letter-spacing: -0.01em;
        }

        .card-desc {
            font-size: 0.88rem; color: var(--text-secondary);
            line-height: 1.6; margin-bottom: 16px;
        }

        .card-tags { display: flex; flex-wrap: wrap; gap: 6px; }

        .card-tag {
            font-size: 0.7rem; padding: 4px 10px;
            border-radius: 6px; font-weight: 600;
            text-transform: uppercase; letter-spacing: 0.06em;
            background: rgba(99,102,241,0.12); color: #818cf8;
        }

        /* Tag colors */
        .tag-ai { background: rgba(99,102,241,0.12); color: #818cf8; }
        .tag-webgl { background: rgba(139,92,246,0.12); color: #a78bfa; }
        .tag-three { background: rgba(6,182,212,0.12); color: #22d3ee; }
        .tag-music { background: rgba(236,72,153,0.12); color: #f472b6; }
        .tag-chat { background: rgba(16,185,129,0.12); color: #34d399; }
        .tag-learn { background: rgba(245,158,11,0.12); color: #fbbf24; }
        .tag-creative { background: rgba(244,63,94,0.12); color: #fb7185; }
        .tag-util { background: rgba(148,163,184,0.12); color: #94a3b8; }
        .tag-react { background: rgba(56,189,248,0.12); color: #38bdf8; }
        .tag-gsap { background: rgba(168,85,247,0.12); color: #c084fc; }

        /* Category accent colors */
        .tool-card[data-cat="ai"] { --card-accent: linear-gradient(90deg,#6366f1,#8b5cf6); --card-glow: rgba(99,102,241,0.1); }
        .tool-card[data-cat="music"] { --card-accent: linear-gradient(90deg,#ec4899,#f43f5e); --card-glow: rgba(236,72,153,0.1); }
        .tool-card[data-cat="comm"] { --card-accent: linear-gradient(90deg,#06b6d4,#0ea5e9); --card-glow: rgba(6,182,212,0.1); }
        .tool-card[data-cat="learn"] { --card-accent: linear-gradient(90deg,#10b981,#059669); --card-glow: rgba(16,185,129,0.1); }
        .tool-card[data-cat="creative"] { --card-accent: linear-gradient(90deg,#f59e0b,#f97316); --card-glow: rgba(245,158,11,0.1); }
        .tool-card[data-cat="utility"] { --card-accent: linear-gradient(90deg,#94a3b8,#64748b); --card-glow: rgba(148,163,184,0.08); }

        /* ===== NO RESULTS ===== */
        .no-results { text-align: center; padding: 80px 20px; display: none; }
        .no-results i { font-size: 3.5rem; margin-bottom: 16px; color: var(--text-muted); }
        .no-results h3 { font-family: 'Space Grotesk'; font-size: 1.5rem; margin-bottom: 8px; }
        .no-results p { color: var(--text-secondary); }

        /* ===== MODAL ===== */
        .modal-overlay {
            position: fixed; inset: 0; z-index: 1000;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
            display: flex; align-items: center; justify-content: center;
            padding: 24px;
            opacity: 0; visibility: hidden;
            transition: opacity 0.35s ease, visibility 0.35s ease;
        }
        .modal-overlay.active { opacity: 1; visibility: visible; }

        .modal-dialog {
            position: relative; width: 100%; max-width: 580px;
            background: var(--modal-bg);
            border: 1px solid var(--glass-border-hover);
            border-radius: 24px; overflow: hidden;
            display: flex; flex-direction: column;
            transform: scale(0.92) translateY(20px);
            transition: transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 32px 80px rgba(0,0,0,0.6), 0 0 60px rgba(99,102,241,0.08);
        }
        .modal-overlay.active .modal-dialog { transform: scale(1) translateY(0); }

        .modal-accent-bar { height: 4px; flex-shrink: 0; }

        .modal-close {
            position: absolute; top: 16px; right: 16px;
            width: 40px; height: 40px; border-radius: 12px;
            background: rgba(255,255,255,0.06);
            border: 1px solid var(--glass-border);
            color: var(--text-secondary); font-size: 1rem;
            cursor: pointer; display: flex; align-items: center; justify-content: center;
            transition: all 0.3s; z-index: 10;
        }
        .modal-close:hover {
            background: rgba(239,68,68,0.2); color: #ef4444;
            border-color: rgba(239,68,68,0.3);
        }

        .modal-body { padding: 32px; overflow-y: auto; flex: 1; }

        .modal-header { display: flex; align-items: center; gap: 20px; margin-bottom: 24px; }

        .modal-icon {
            width: 64px; height: 64px; border-radius: 18px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem; flex-shrink: 0; color: white;
        }

        .modal-info { flex: 1; min-width: 0; }

        .modal-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5rem; font-weight: 700; letter-spacing: -0.02em; margin-bottom: 4px;
        }

        .modal-category-label {
            font-size: 0.8rem; color: var(--text-muted);
            text-transform: uppercase; letter-spacing: 0.08em; font-weight: 600;
        }

        .modal-desc {
            font-size: 0.95rem; color: var(--text-secondary);
            line-height: 1.7; margin-bottom: 20px;
        }

        .modal-tags {
            display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 28px;
        }
        .modal-tags .card-tag { font-size: 0.75rem; padding: 5px 13px; }

        .modal-actions { display: flex; gap: 12px; }

        .modal-btn {
            flex: 1; padding: 14px 24px; border-radius: 14px;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 0.95rem; font-weight: 600; cursor: pointer;
            transition: all 0.3s; text-decoration: none; text-align: center;
            display: flex; align-items: center; justify-content: center; gap: 8px; border: none;
        }
        .modal-btn-primary {
            background: linear-gradient(135deg, var(--accent-1), var(--accent-2));
            color: white; box-shadow: 0 4px 20px rgba(99,102,241,0.3);
        }
        .modal-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(99,102,241,0.45);
        }
        .modal-btn-secondary {
            background: rgba(255,255,255,0.05); color: var(--text-secondary);
            border: 1px solid var(--glass-border);
        }
        .modal-btn-secondary:hover {
            background: rgba(255,255,255,0.1); color: var(--text-primary);
        }

        /* ===== FOOTER ===== */
        .footer {
            position: relative; z-index: 1; text-align: center;
            padding: 40px 32px; border-top: 1px solid var(--glass-border);
            color: var(--text-muted); font-size: 0.85rem;
        }
        .footer a { color: var(--accent-1); text-decoration: none; }
        .footer a:hover { text-decoration: underline; }

        /* ===== ANIMATIONS ===== */
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeInDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .top-nav { padding: 12px 16px; }
            .nav-links { display: none; }
            .hero { padding: 120px 16px 40px; }
            .hero h1 { font-size: 2.2rem; }
            .filter-section, .categories-container { padding-left: 16px; padding-right: 16px; }
            .tools-grid { grid-template-columns: 1fr; }
            .filter-tabs { justify-content: flex-start; overflow-x: auto; flex-wrap: nowrap; padding-bottom: 8px; -webkit-overflow-scrolling: touch; }
            .filter-tab { white-space: nowrap; flex-shrink: 0; }
            .modal-dialog { max-width: 100%; border-radius: 18px; }
            .modal-body { padding: 24px 20px; }
            .modal-actions { flex-direction: column; }
        }

        /* ===== FORM STYLES ===== */
        .form-group { margin-bottom: 20px; }
        .form-group label {
            display: block; margin-bottom: 8px;
            font-size: 0.85rem; font-weight: 600; color: var(--text-secondary);
        }
        .form-input {
            width: 100%; padding: 12px 16px;
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--glass-border);
            border-radius: 12px; color: var(--text-primary);
            font-family: inherit; font-size: 0.95rem;
            transition: all 0.3s;
        }
        .form-input:focus {
            outline: none; border-color: var(--accent-1);
            background: rgba(99, 102, 241, 0.05);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.15);
        }
        .form-error {
            color: #ef4444; font-size: 0.85rem; margin-top: 8px;
            padding: 8px 12px; background: rgba(239, 68, 68, 0.1);
            border-radius: 8px; display: none;
        }
        .form-footer {
            margin-top: 24px; text-align: center; font-size: 0.9rem; color: var(--text-secondary);
        }
        .form-footer a {
            color: var(--accent-1); text-decoration: none; font-weight: 600;
        }
        .form-footer a:hover { text-decoration: underline; }

        @media (max-width: 480px) {
            .hero h1 { font-size: 1.8rem; }
            .tool-card { padding: 22px 20px; }
            .card-icon-wrapper { width: 44px; height: 44px; font-size: 1.1rem; }
            .toast-container { right: 50%; transform: translateX(50%); width: 90%; }
        }

        /* ===== TOAST NOTIFICATIONS ===== */
        .toast-container {
            position: fixed; top: 24px; right: 24px;
            display: flex; flex-direction: column; gap: 12px;
            z-index: 9999; pointer-events: none;
        }
        .toast {
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            padding: 16px 20px; border-radius: 12px;
            display: flex; align-items: center; gap: 12px;
            color: var(--text-primary);
            box-shadow: 0 10px 40px -10px rgba(0,0,0,0.5);
            min-width: 300px; pointer-events: auto;
            transform: translateX(100%); opacity: 0;
            animation: slideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
        .toast.success { border-left: 4px solid #10b981; }
        .toast.error { border-left: 4px solid #ef4444; }
        .toast.info { border-left: 4px solid #3b82f6; }
        
        .toast-icon { font-size: 1.2rem; }
        .toast.success .toast-icon { color: #10b981; }
        .toast.error .toast-icon { color: #ef4444; }
        .toast.info .toast-icon { color: #3b82f6; }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
    </style>
</head>
<body>

    <canvas id="particles"></canvas>

    <!-- Navigation -->
    <nav class="top-nav">
        <div class="nav-logo" onclick="window.scrollTo({top:0,behavior:'smooth'})">NTD Tools</div>
        <div class="nav-links" id="navLinks"></div>
        <div class="nav-right">
            <button class="theme-toggle" id="themeToggle" title="Chuyển chế độ sáng/tối">
                <i class="fa-solid fa-moon"></i>
                <i class="fa-solid fa-sun"></i>
            </button>
            <div class="nav-stats">
                <span class="count" id="toolCount">0</span> tools
            </div>
        </div>
    </nav>

    <!-- Hero -->
    <section class="hero">
        <div class="hero-badge"><span class="dot"></span> Bộ sưu tập công cụ</div>
        <h1>Tất cả công cụ,<br><span class="gradient-text">một nơi duy nhất.</span></h1>
        <p>Khám phá bộ sưu tập AI, âm nhạc, giao tiếp, học tập và nhiều công cụ sáng tạo khác — tất cả tại đây.</p>
        <div class="search-wrapper">
            <i class="fa-solid fa-magnifying-glass search-icon"></i>
            <input type="text" class="search-input" id="searchInput" placeholder="Tìm kiếm công cụ..." autocomplete="off">
        </div>
    </section>

    <!-- Filter Tabs -->
    <section class="filter-section">
        <div class="filter-tabs" id="filterTabs"></div>
    </section>

    <!-- Categories (generated by JS) -->
    <main class="categories-container" id="categoriesContainer"></main>

    <!-- No Results -->
    <div class="no-results" id="noResults">
        <i class="fa-solid fa-search"></i>
        <h3>Không tìm thấy kết quả</h3>
        <p>Thử tìm kiếm với từ khóa khác nhé!</p>
    </div>
    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Confirm Dialog -->
    <div class="modal-overlay" id="confirmModal" style="z-index: 2000;">
        <div class="modal-dialog" style="max-width: 400px; text-align: center;">
            <div class="modal-body" style="padding: 32px 24px;">
                <div style="font-size: 48px; margin-bottom: 16px; color: var(--accent-1);">
                    <i class="fa-solid fa-circle-question"></i>
                </div>
                <h3 style="margin-bottom: 8px; font-size: 1.2rem;">Xác nhận</h3>
                <p id="confirmMessage" style="color: var(--text-secondary); margin-bottom: 24px;">Bạn có chắc chắn muốn thực hiện hành động này?</p>
                <div class="modal-actions" style="justify-content: center; gap: 12px;">
                    <button class="modal-btn modal-btn-secondary" onclick="closeConfirm(false)" style="min-width: 100px;">Hủy</button>
                    <button class="modal-btn modal-btn-primary" onclick="closeConfirm(true)" style="min-width: 100px;">Đồng ý</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal -->
    <div class="modal-overlay" id="toolModal">
        <div class="modal-dialog">
            <div class="modal-accent-bar" id="modalAccentBar"></div>
            <button class="modal-close" id="modalClose"><i class="fa-solid fa-xmark"></i></button>
            <div class="modal-body">
                <div class="modal-header">
                    <div class="modal-icon" id="modalIcon"></div>
                    <div class="modal-info">
                        <h2 class="modal-title" id="modalTitle"></h2>
                        <div class="modal-category-label" id="modalCategory"></div>
                    </div>
                </div>
                <p class="modal-desc" id="modalDesc"></p>
                <div class="modal-tags" id="modalTags"></div>
                <div class="modal-actions">
                    <a class="modal-btn modal-btn-primary" id="modalOpenBtn" href="#" target="_blank">
                        <i class="fa-solid fa-rocket"></i> Mở công cụ
                    </a>
                    <button class="modal-btn modal-btn-secondary" id="modalCloseBtn">
                        <i class="fa-solid fa-arrow-left"></i> Quay lại
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal-overlay" id="loginModal">
        <div class="modal-dialog" style="max-width: 420px;">
            <div class="modal-accent-bar" style="background: linear-gradient(90deg, var(--accent-1), var(--accent-3));"></div>
            <button class="modal-close" onclick="closeModal('loginModal')"><i class="fa-solid fa-xmark"></i></button>
            <div class="modal-body">
                <h2 class="modal-title" style="margin-bottom: 24px; text-align: center;">Đăng nhập</h2>
                <form id="loginForm" onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" class="form-input" placeholder="example@email.com" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Mật khẩu</label>
                        <input type="password" id="loginPassword" class="form-input" placeholder="•••••••" required>
                    </div>
                    <div id="loginError" class="form-error"></div>
                    <button type="submit" id="loginSubmit" class="modal-btn modal-btn-primary" style="width: 100%; margin-top: 16px;">
                        Đăng nhập
                    </button>
                </form>
                <div class="form-footer">
                    Chưa có tài khoản? <a href="#" onclick="switchToRegister()">Đăng ký ngay</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal-overlay" id="registerModal">
        <div class="modal-dialog" style="max-width: 420px;">
            <div class="modal-accent-bar" style="background: linear-gradient(90deg, var(--accent-4), var(--accent-5));"></div>
            <button class="modal-close" onclick="closeModal('registerModal')"><i class="fa-solid fa-xmark"></i></button>
            <div class="modal-body">
                <h2 class="modal-title" style="margin-bottom: 24px; text-align: center;">Đăng ký</h2>
                <form id="registerForm" onsubmit="handleRegister(event)">
                    <div class="form-group">
                        <label for="regDisplayName">Tên hiển thị</label>
                        <input type="text" id="regDisplayName" class="form-input" placeholder="Tên của bạn" required minlength="3">
                    </div>
                    <div class="form-group">
                        <label for="regEmail">Email</label>
                        <input type="email" id="regEmail" class="form-input" placeholder="example@email.com" required>
                    </div>
                     <div class="form-group">
                        <label for="regPhone">Số điện thoại</label>
                        <input type="tel" id="regPhone" class="form-input" placeholder="09xxxxxxxxx" required pattern="[0-9]{10}">
                    </div>
                    <div class="form-group">
                        <label for="regPassword">Mật khẩu</label>
                        <input type="password" id="regPassword" class="form-input" placeholder="Tối thiểu 6 ký tự" required minlength="6">
                    </div>
                    <div class="form-group">
                        <label for="regConfirmPassword">Nhập lại mật khẩu</label>
                        <input type="password" id="regConfirmPassword" class="form-input" placeholder="Xác nhận mật khẩu" required>
                    </div>
                    <div id="regError" class="form-error"></div>
                    <button type="submit" id="regSubmit" class="modal-btn modal-btn-primary" style="width: 100%; margin-top: 16px;">
                        Đăng ký
                    </button>
                </form>
                <div class="form-footer">
                    Đã có tài khoản? <a href="#" onclick="switchToLogin()">Đăng nhập</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <p>© 2026 <a href="index.html">NTD Tools Hub</a> — Tổng hợp công cụ & ứng dụng web</p>
    </footer>
    <script type="module" src="js/supabase-client.js"></script>
    <script type="module" src="js/auth.js"></script>
    <script>
    // ╔══════════════════════════════════════════════════════════════╗
    // ║  TOOLS DATA — Thêm tool mới chỉ cần thêm object vào đây!  ║
    // ╚══════════════════════════════════════════════════════════════╝

    const CATEGORIES = {
        ai:       { label: 'AI UX/UI',             nav: 'AI UX/UI',         icon: 'fa-solid fa-robot',           color: '#6366f1', gradient: 'linear-gradient(90deg,#6366f1,#8b5cf6)' },
        music:    { label: 'Âm nhạc & Giải trí',   nav: 'Âm nhạc',    icon: 'fa-solid fa-music',           color: '#ec4899', gradient: 'linear-gradient(90deg,#ec4899,#f43f5e)' },
        comm:     { label: 'Giao tiếp',             nav: 'Giao tiếp',  icon: 'fa-solid fa-comments',        color: '#06b6d4', gradient: 'linear-gradient(90deg,#06b6d4,#0ea5e9)' },
        learn:    { label: 'Học tập',               nav: 'Học tập',    icon: 'fa-solid fa-book-open',       color: '#10b981', gradient: 'linear-gradient(90deg,#10b981,#059669)' },
        creative: { label: 'Sáng tạo & Mùa lễ',    nav: 'Sáng tạo',   icon: 'fa-solid fa-palette',         color: '#f59e0b', gradient: 'linear-gradient(90deg,#f59e0b,#f97316)' },
        utility:  { label: 'Tiện ích & Khác',       nav: 'Tiện ích',   icon: 'fa-solid fa-gear',            color: '#94a3b8', gradient: 'linear-gradient(90deg,#94a3b8,#64748b)' },
    };

    const TOOLS = [
        // ── AI Tools ──
        { cat: 'ai', title: 'Claude',              url: 'TOOLS/AI/claude/index.html',   icon: 'fa-solid fa-brain',            iconBg: 'linear-gradient(135deg,rgba(217,119,87,0.25),rgba(217,119,87,0.08))', desc: 'AI thông minh từ Anthropic — suy luận sâu, lập trình mạnh mẽ, an toàn và trung thực.', tags: [['AI','tag-ai'],['WebGL','tag-webgl'],['GSAP','tag-gsap']] },
        { cat: 'ai', title: 'Gemini',              url: 'TOOLS/AI/gemini/index.html',   icon: 'fa-solid fa-star-of-david',    iconBg: 'linear-gradient(135deg,rgba(66,133,244,0.25),rgba(234,67,53,0.12)', desc: 'AI thế hệ mới từ Google — xử lý đa phương thức, siêu nhanh, kiến trúc thần kinh tiên tiến.', tags: [['AI','tag-ai'],['Three.js','tag-three'],['GSAP','tag-gsap']] },
        { cat: 'ai', title: 'GPT',                 url: 'TOOLS/AI/gpt/index.html',     icon: 'fa-solid fa-circle-nodes',     iconBg: 'linear-gradient(135deg,rgba(16,163,127,0.25),rgba(16,163,127,0.08)', desc: 'Nền tảng AI từ OpenAI — tạo sản phẩm thông minh với tốc độ tư duy, đa phương thức.', tags: [['AI','tag-ai'],['WebGL','tag-webgl'],['Three.js','tag-three']] },
        { cat: 'ai', title: 'Kimi (NEXUS)',         url: 'TOOLS/AI/kimi/index.html',    icon: 'fa-solid fa-bolt',             iconBg: 'linear-gradient(135deg,rgba(0,240,255,0.25),rgba(112,0,255,0.12)', desc: 'Trang trải nghiệm kỹ thuật số tương lai — WebGL particles, hiệu ứng glassmorphism ấn tượng.', tags: [['AI','tag-ai'],['Three.js','tag-three'],['Tailwind','tag-gsap']] },
        { cat: 'ai', title: 'MiniMax (NEXUS)',      url: 'TOOLS/AI/minimax/index.html', icon: 'fa-solid fa-wand-magic-sparkles', iconBg: 'linear-gradient(135deg,rgba(0,245,255,0.25),rgba(0,245,255,0.08)', desc: 'Ứng dụng Digital Experience thế hệ mới — giao diện tương tác, hiệu ứng visual cutting-edge.', tags: [['AI','tag-ai'],['React','tag-react'],['TypeScript','tag-gsap']] },
        { cat: 'ai', title: 'GLM (Creative Studio)', url: 'TOOLS/AI/glm/index.html',   icon: 'fa-solid fa-bullseye',         iconBg: 'linear-gradient(135deg,rgba(0,212,170,0.25),rgba(255,107,53,0.12)', desc: 'Studio sáng tạo kỹ thuật số — dịch vụ thiết kế web 3D, animation, custom cursor nâng cao.', tags: [['AI','tag-ai'],['Three.js','tag-three'],['GSAP','tag-gsap']] },

        // ── Âm nhạc ──
        { cat: 'music', title: 'ntdPlayMusic',  url: 'TOOLS/music/index.html',        icon: 'fa-solid fa-headphones',       iconBg: 'linear-gradient(135deg,rgba(236,72,153,0.25),rgba(244,63,94,0.12)', desc: 'Music player với audio visualizer, danh sách phát, điều khiển toàn diện và giao diện đẹp mắt.', tags: [['Music','tag-music'],['Visualizer','tag-creative']] },
        { cat: 'music', title: 'ntdMusic',          url: 'TOOLS/songs/index.html',        icon: 'fa-solid fa-compact-disc',     iconBg: 'linear-gradient(135deg,rgba(244,63,94,0.25),rgba(236,72,153,0.12)', desc: 'Ứng dụng quản lý bài hát cộng đồng — thêm, tìm kiếm, xem lời, bảng xếp hạng, streak hàng ngày.', tags: [['Music','tag-music'],['Supabase','tag-chat'],['Social','tag-util']] },
        { cat: 'music', title: 'ntdLyric',        url: 'TOOLS/auto/autolyric.html',    icon: 'fa-solid fa-file-lines',       iconBg: 'linear-gradient(135deg,rgba(168,85,247,0.25),rgba(139,92,246,0.12)', desc: 'Công cụ tự động tìm và hiển thị lời bài hát — nhanh chóng, chính xác.', tags: [['Music','tag-music'],['Auto','tag-util']] },

        // ── Giao tiếp ──
        { cat: 'comm', title: 'ntdChat v2',         url: 'TOOLS/chatv2/index.html',      icon: 'fa-solid fa-terminal',         iconBg: 'linear-gradient(135deg,rgba(0,255,65,0.2),rgba(0,200,51,0.1)', desc: 'Ứng dụng chat realtime với giao diện hacker — reaction, quản lý online, bot, giao diện matrix.', tags: [['Realtime','tag-chat'],['Supabase','tag-chat'],['Chat','tag-util']] },

        // ── Học tập ──
        { cat: 'learn', title: 'ntdVocab',          url: 'TOOLS/vocab/index.html',       icon: 'fa-solid fa-language',         iconBg: 'linear-gradient(135deg,rgba(16,185,129,0.25),rgba(5,150,105,0.12)', desc: 'Ứng dụng quản lý từ vựng tiếng Hàn — tìm kiếm, thêm từ mới, phân loại theo cấp độ TOPIK.', tags: [['Korean','tag-learn'],['Supabase','tag-chat'],['TOPIK','tag-learn']] },
        { cat: 'learn', title: 'ntdPomo',  url: 'TOOLS/pomodoro/1.html',        icon: 'fa-solid fa-clock',            iconBg: 'linear-gradient(135deg,rgba(239,68,68,0.25),rgba(220,38,38,0.12)', desc: 'Đồng hồ Pomodoro giúp tập trung — chia thời gian làm việc và nghỉ ngơi hiệu quả.', tags: [['Timer','tag-util'],['Focus','tag-learn']] },

        // ── Sáng tạo & Mùa lễ ──
        { cat: 'creative', title: 'ntdHBD',         url: 'TOOLS/happybirthday/index.html', icon: 'fa-solid fa-cake-candles',   iconBg: 'linear-gradient(135deg,rgba(99,102,241,0.25),rgba(236,72,153,0.12)', desc: 'Tạo thiệp sinh nhật cá nhân hóa — nhập tên, chọn ngày sinh và tạo thiệp đẹp tức thì.', tags: [['Birthday','tag-creative'],['Generator','tag-creative']] },
        { cat: 'creative', title: 'ntdMCh', url: 'TOOLS/christmast/index.html',  icon: 'fa-solid fa-tree',             iconBg: 'linear-gradient(135deg,rgba(255,75,87,0.25),rgba(46,213,115,0.12)', desc: 'Trang chúc Giáng Sinh tuyệt đẹp — cây thông 3D, tuyết rơi, ông già Noel, hiệu ứng particles.', tags: [['Christmas','tag-creative'],['Canvas','tag-creative']] },
        { cat: 'creative', title: 'ntdHNY2026', url: 'TOOLS/demo/happynewyear2026.html', icon: 'fa-solid fa-champagne-glasses', iconBg: 'linear-gradient(135deg,rgba(255,215,0,0.25),rgba(255,107,107,0.12)', desc: 'Trang chúc mừng năm mới — pháo hoa, hiệu ứng countdown, animation rực rỡ.', tags: [['New Year','tag-creative'],['Fireworks','tag-creative']] },

        // ── Tiện ích ──
        { cat: 'utility', title: 'ntd Gallery',      url: 'TOOLS/demo/3d.html',           icon: 'fa-solid fa-cube',             iconBg: 'linear-gradient(135deg,rgba(56,189,248,0.25),rgba(14,165,233,0.12)', desc: 'Phòng triển lãm 3D tương tác — di chuyển WASD, xem ảnh trong không gian 3 chiều.', tags: [['Three.js','tag-three'],['3D','tag-webgl'],['Gallery','tag-util']] },
        { cat: 'utility', title: 'ntdDemo',  url: 'TOOLS/interface/1.html',       icon: 'fa-solid fa-desktop',          iconBg: 'linear-gradient(135deg,rgba(148,163,184,0.25),rgba(100,116,139,0.12)', desc: 'Demo giao diện người dùng — mẫu thiết kế UI/UX hiện đại, tham khảo và trải nghiệm.', tags: [['UI/UX','tag-util'],['Demo','tag-util']] },
    ];

    // ══════════════════════════════════════════
    //  AUTO-GENERATE UI FROM DATA
    // ══════════════════════════════════════════

    const container = document.getElementById('categoriesContainer');
    const filterTabsEl = document.getElementById('filterTabs');
    const navLinksEl = document.getElementById('navLinks');

    // Group tools by category
    const grouped = {};
    TOOLS.forEach(t => {
        if (!grouped[t.cat]) grouped[t.cat] = [];
        grouped[t.cat].push(t);
    });

    // Build nav links
    Object.entries(CATEGORIES).forEach(([key, cat]) => {
        if (!grouped[key]) return;
        const a = document.createElement('a');
        a.href = `#${key}`;
        a.dataset.filter = key;
        a.innerHTML = `<i class="${cat.icon}"></i> ${cat.nav}`;
        navLinksEl.appendChild(a);
    });

    // Build filter tabs
    const allTab = document.createElement('div');
    allTab.className = 'filter-tab active';
    allTab.dataset.filter = 'all';
    allTab.innerHTML = `<i class="fa-solid fa-layer-group"></i> Tất cả <span class="tab-count">${TOOLS.length}</span>`;
    filterTabsEl.appendChild(allTab);

    Object.entries(CATEGORIES).forEach(([key, cat]) => {
        const count = grouped[key]?.length || 0;
        if (!count) return;
        const tab = document.createElement('div');
        tab.className = 'filter-tab';
        tab.dataset.filter = key;
        tab.innerHTML = `<i class="${cat.icon}"></i> ${cat.label.split('&')[0].trim()} <span class="tab-count">${count}</span>`;
        filterTabsEl.appendChild(tab);
    });

    // Build category sections + cards
    Object.entries(CATEGORIES).forEach(([key, cat]) => {
        const tools = grouped[key];
        if (!tools || !tools.length) return;

        const section = document.createElement('section');
        section.className = `category-section`;
        section.dataset.category = key;
        section.id = key;

        section.innerHTML = `
            <div class="category-header">
                <div class="category-icon" style="background:${cat.color}22;">
                    <i class="${cat.icon}" style="color:${cat.color};"></i>
                </div>
                <h2 class="category-title" style="color:${cat.color}">${cat.label}</h2>
                <span class="category-count">${tools.length} tool${tools.length > 1 ? 's' : ''}</span>
            </div>
            <div class="tools-grid">
                ${tools.map((t, i) => `
                    <div class="tool-card" data-cat="${key}" data-idx="${TOOLS.indexOf(t)}"
                         style="--card-accent:${cat.gradient}; --card-glow:${cat.color}22;">
                        <div class="card-header">
                            <div class="card-icon-wrapper" style="background:${t.iconBg}">
                                <i class="${t.icon}"></i>
                            </div>
                            <div class="card-arrow"><i class="fa-solid fa-arrow-up-right-from-square"></i></div>
                        </div>
                        <h3 class="card-title">${t.title}</h3>
                        <p class="card-desc">${t.desc}</p>
                        <div class="card-tags">
                            ${t.tags.map(([label, cls]) => `<span class="card-tag ${cls}">${label}</span>`).join('')}
                        </div>
                    </div>
                `).join('')}
            </div>
        `;

        container.appendChild(section);
    });

    // Update tool count
    document.getElementById('toolCount').textContent = TOOLS.length;

    // ══════════════════════════════════════════
    //  SEARCH & FILTER
    // ══════════════════════════════════════════

    const searchInput = document.getElementById('searchInput');
    const filterTabs = document.querySelectorAll('.filter-tab');
    const noResults = document.getElementById('noResults');
    let currentFilter = 'all';

    filterTabs.forEach(tab => {
        tab.addEventListener('click', () => {
            filterTabs.forEach(t => t.classList.remove('active'));
            tab.classList.add('active');
            currentFilter = tab.dataset.filter;
            applyFilters();
        });
    });

    function applyFilters() {
        const query = searchInput.value.trim().toLowerCase();
        let visibleCount = 0;

        document.querySelectorAll('.category-section').forEach(section => {
            const cards = section.querySelectorAll('.tool-card');
            let sectionVisible = false;
            cards.forEach(card => {
                const idx = parseInt(card.dataset.idx);
                const t = TOOLS[idx];
                const haystack = `${t.title} ${t.desc} ${t.tags.map(x=>x[0]).join(' ')}`.toLowerCase();
                const matchSearch = !query || haystack.includes(query);
                const matchFilter = currentFilter === 'all' || t.cat === currentFilter;
                const visible = matchSearch && matchFilter;
                card.style.display = visible ? '' : 'none';
                if (visible) { sectionVisible = true; visibleCount++; }
            });
            section.style.display = sectionVisible ? '' : 'none';
        });

        noResults.style.display = visibleCount === 0 ? 'block' : 'none';
    }

    searchInput.addEventListener('input', () => {
        if (searchInput.value.trim()) {
            filterTabs.forEach(t => t.classList.toggle('active', t.dataset.filter === 'all'));
            currentFilter = 'all';
        }
        applyFilters();
    });

    // ══════════════════════════════════════════
    //  MODAL
    // ══════════════════════════════════════════

    const modal = document.getElementById('toolModal');

    function openToolDetails(idx) {
        const t = TOOLS[idx];
        const cat = CATEGORIES[t.cat];
        document.getElementById('modalIcon').innerHTML = `<i class="${t.icon}"></i>`;
        document.getElementById('modalIcon').style.background = t.iconBg;
        document.getElementById('modalTitle').textContent = t.title;
        document.getElementById('modalCategory').textContent = cat.label;
        document.getElementById('modalDesc').textContent = t.desc;
        document.getElementById('modalTags').innerHTML = t.tags.map(([l, c]) => `<span class="card-tag ${c}">${l}</span>`).join('');
        document.getElementById('modalOpenBtn').href = t.url;
        document.getElementById('modalAccentBar').style.background = cat.gradient;
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    function closeModal() {
        modal.classList.remove('active');
        document.body.style.overflow = '';
    }

    document.addEventListener('click', e => {
        const card = e.target.closest('.tool-card');
        if (card) { e.preventDefault(); openToolDetails(parseInt(card.dataset.idx)); }
    });

    document.getElementById('modalClose').addEventListener('click', closeModal);
    document.getElementById('modalCloseBtn').addEventListener('click', closeModal);
    modal.addEventListener('click', e => { if (e.target === modal) closeModal(); });
    document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

    // ══════════════════════════════════════════
    //  NAV LINKS (scroll, not filter)
    // ══════════════════════════════════════════

    const navLinks = document.querySelectorAll('.nav-links a');
    let scrollSpyPaused = false;

    navLinks.forEach(link => {
        link.addEventListener('click', e => {
            e.preventDefault();
            const id = link.dataset.filter;
            filterTabs.forEach(t => t.classList.toggle('active', t.dataset.filter === 'all'));
            currentFilter = 'all';
            searchInput.value = '';
            applyFilters();
            scrollSpyPaused = true;
            setTimeout(() => { scrollSpyPaused = false; }, 1000);
            navLinks.forEach(l => l.classList.remove('active'));
            link.classList.add('active');
            // Wait for layout reflow after applyFilters
            requestAnimationFrame(() => {
                const target = document.getElementById(id);
                if (target) {
                    const nh = document.querySelector('.top-nav').offsetHeight;
                    const top = target.getBoundingClientRect().top + window.scrollY - nh - 16;
                    window.scrollTo({ top, behavior: 'smooth' });
                }
            });
        });
    });

    // ══════════════════════════════════════════
    //  CARD HOVER GLOW
    // ══════════════════════════════════════════

    document.addEventListener('mousemove', e => {
        const card = e.target.closest('.tool-card');
        if (!card) return;
        const r = card.getBoundingClientRect();
        card.style.setProperty('--mouse-x', ((e.clientX - r.left) / r.width * 100) + '%');
        card.style.setProperty('--mouse-y', ((e.clientY - r.top) / r.height * 100) + '%');
    });

    // ══════════════════════════════════════════
    //  SCROLL ANIMATIONS & SCROLL SPY
    // ══════════════════════════════════════════

    const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, { threshold: 0.1, rootMargin: '0px 0px -40px 0px' });

    document.querySelectorAll('.category-section').forEach((section, i) => {
        section.style.opacity = '0';
        section.style.transform = 'translateY(30px)';
        section.style.transition = `opacity 0.6s ease ${i * 0.1}s, transform 0.6s ease ${i * 0.1}s`;
        observer.observe(section);
    });

    const navHeight = document.querySelector('.top-nav').offsetHeight;
    const isLight = () => document.body.classList.contains('light-mode');

    const updateNavBackground = () => {
        const scroll = window.scrollY;
        const nav = document.querySelector('.top-nav');
        if (isLight()) {
            nav.style.background = scroll > 100
                ? 'rgba(245,246,250,0.92)' : 'rgba(245,246,250,0.7)';
        } else {
            nav.style.background = scroll > 100
                ? 'rgba(5,6,15,0.85)' : 'rgba(5,6,15,0.6)';
        }
    };

    window.addEventListener('scroll', () => {
        updateNavBackground();
        const scroll = window.scrollY;

        if (scrollSpyPaused) return;
        let activeId = '';
        document.querySelectorAll('.category-section').forEach(s => {
            const sTop = s.getBoundingClientRect().top + scroll;
            if (sTop <= scroll + navHeight + 20) activeId = s.id;
        });
        if (activeId && scroll > 300) {
            navLinks.forEach(l => l.classList.toggle('active', l.dataset.filter === activeId));
        } else {
            navLinks.forEach(l => l.classList.remove('active'));
        }
    });

    // ══════════════════════════════════════════
    //  THEME TOGGLE
    // ══════════════════════════════════════════

    const themeToggle = document.getElementById('themeToggle');
    const savedTheme = localStorage.getItem('ntd-theme');
    if (savedTheme === 'light') document.body.classList.add('light-mode');

    themeToggle.addEventListener('click', () => {
        document.body.classList.toggle('light-mode');
        localStorage.setItem('ntd-theme', isLight() ? 'light' : 'dark');
        updateNavBackground(); // Update nav instantly
    });
    
    // Initial update
    updateNavBackground();

    // ══════════════════════════════════════════
    //  PARTICLES
    // ══════════════════════════════════════════

    const canvas = document.getElementById('particles');
    const ctx = canvas.getContext('2d');
    function resizeCanvas() { canvas.width = innerWidth; canvas.height = innerHeight; }
    resizeCanvas(); addEventListener('resize', resizeCanvas);

    class Particle {
        constructor() { this.reset(); }
        reset() {
            this.x = Math.random() * canvas.width;
            this.y = Math.random() * canvas.height;
            this.size = Math.random() * 2 + 0.5;
            this.speedX = (Math.random() - 0.5) * 0.3;
            this.speedY = (Math.random() - 0.5) * 0.3;
            this.opacity = Math.random() * 0.4 + 0.1;
            this.color = ['#6366f1','#8b5cf6','#ec4899','#06b6d4','#10b981'][Math.floor(Math.random()*5)];
        }
        update() {
            this.x += this.speedX; this.y += this.speedY;
            if (this.x < 0 || this.x > canvas.width) this.speedX *= -1;
            if (this.y < 0 || this.y > canvas.height) this.speedY *= -1;
        }
        draw() {
            ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
            ctx.fillStyle = this.color; ctx.globalAlpha = this.opacity;
            ctx.fill(); ctx.globalAlpha = 1;
        }
    }

    const pts = Array.from({length:60}, () => new Particle());
    function drawLines() {
        for (let i=0; i<pts.length; i++)
            for (let j=i+1; j<pts.length; j++) {
                const d = Math.hypot(pts[i].x-pts[j].x, pts[i].y-pts[j].y);
                if (d<150) {
                    ctx.beginPath(); ctx.moveTo(pts[i].x,pts[i].y); ctx.lineTo(pts[j].x,pts[j].y);
                    const a = isLight() ? 0.04 : 0.06;
                    ctx.strokeStyle=`rgba(99,102,241,${a*(1-d/150)})`; ctx.lineWidth=0.5; ctx.stroke();
                }
            }
    }
    (function animate() {
        ctx.clearRect(0,0,canvas.width,canvas.height);
        pts.forEach(p=>{p.update();p.draw();}); drawLines();
        requestAnimationFrame(animate);
    })();
    </script>
</body>
</html>
